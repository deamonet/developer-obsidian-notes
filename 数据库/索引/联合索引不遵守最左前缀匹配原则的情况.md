# æˆ‘è¯´MySQLè”åˆç´¢å¼•éµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œé¢è¯•å®˜è®©æˆ‘å›å»ç­‰é€šçŸ¥

[![](media/36a3a9c70e92df23b1a2087b47d9aaac~100x100.awebp.webp)](https://juejin.cn/user/360295542819710)

[ä¸€ç¯æ¶æ„![lv-4](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/lv-4.a78c420.png "åˆ›ä½œç­‰çº§")

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/360295542819710)

2022å¹´08æœˆ03æ—¥ 22:28Â Â·Â Â é˜…è¯» 16847

![æˆ‘è¯´MySQLè”åˆç´¢å¼•éµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œé¢è¯•å®˜è®©æˆ‘å›å»ç­‰é€šçŸ¥](media/æˆ‘è¯´MySQLè”åˆç´¢å¼•éµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œé¢è¯•å®˜è®©æˆ‘å›å»ç­‰é€šçŸ¥.webp)

æºæ‰‹åˆ›ä½œï¼Œå…±åŒæˆé•¿ï¼è¿™æ˜¯æˆ‘å‚ä¸ã€Œæ˜é‡‘æ—¥æ–°è®¡åˆ’ Â· 8 æœˆæ›´æ–‡æŒ‘æˆ˜ã€çš„ç¬¬6å¤©ï¼Œ[ç‚¹å‡»æŸ¥çœ‹æ´»åŠ¨è¯¦æƒ…](https://juejin.cn/post/7123120819437322247 "https://juejin.cn/post/7123120819437322247")

**é¢è¯•å®˜ï¼š**Â æˆ‘çœ‹ä½ çš„ç®€å†ä¸Šå†™ç€**ç²¾é€šMySQL**ï¼Œé—®ä½ ä¸ªç®€å•çš„é—®é¢˜ï¼Œ**MySQLè”åˆç´¢å¼•**æœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ

> å¿ƒæƒ³ï¼Œè¿™è¿˜ä¸ç®€å•ï¼Œè¿™ä¸æ˜¯é—®åˆ°æˆ‘æ‰‹å¿ƒé‡Œäº†å—ï¼Ÿ
> 
> å¬æˆ‘ç»™ä½ èƒŒä¸€éå…«è‚¡æ–‡ï¼

![ä¸€åˆ‡éƒ½åœ¨æŒæ¡.jpeg](media/ä¸€åˆ‡éƒ½åœ¨æŒæ¡.jpeg.webp)

**æˆ‘ï¼š**Â **MySQLè”åˆç´¢å¼•**éµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œå³æœ€å·¦ä¼˜å…ˆï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¼šä¼˜å…ˆåŒ¹é…æœ€å·¦è¾¹çš„ç´¢å¼•ã€‚

ä¾‹å¦‚å½“æˆ‘ä»¬åœ¨Â **(a,b,c)**Â ä¸‰ä¸ªå­—æ®µä¸Šåˆ›å»ºè”åˆç´¢å¼•æ—¶ï¼Œå®é™…ä¸Šæ˜¯åˆ›å»ºäº†ä¸‰ä¸ªç´¢å¼•ï¼Œåˆ†åˆ«æ˜¯(a)ã€(a,b)ã€(a,b,c)ã€‚

æŸ¥è¯¢æ¡ä»¶ä¸­åŒ…å«è¿™äº›ç´¢å¼•çš„æ—¶å€™ï¼ŒæŸ¥è¯¢å°±ä¼šç”¨åˆ°ç´¢å¼•ã€‚ä¾‹å¦‚ä¸‹é¢çš„æŸ¥è¯¢æ¡ä»¶ï¼Œå°±å¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼š

```csharp
select * from table_name where a=?;
select * from table_name where a=? and b=?;
select * from table_name where a=? and b=? and c=?;
å¤åˆ¶ä»£ç 
```

å…¶ä»–æŸ¥è¯¢æ¡ä»¶ä¸åŒ…å«è¿™äº›ç´¢å¼•çš„è¯­å¥ï¼Œå°±ä¸ä¼šç”¨åˆ°ç´¢å¼•ï¼Œä¾‹å¦‚ï¼š

```csharp
select * from table_name where b=?;
select * from table_name where c=?;
select * from table_name where b=? and c=?;
å¤åˆ¶ä»£ç 
```

å¦‚æœæŸ¥è¯¢æ¡ä»¶åŒ…å«(a,c)ï¼Œä¹Ÿä¼šç”¨åˆ°ç´¢å¼•ï¼Œç›¸å½“äºç”¨åˆ°äº†(a)ç´¢å¼•ã€‚

**é¢è¯•å®˜ï¼š**Â å°ä¼™å­ï¼Œä½ çš„å…«è‚¡æ–‡èƒŒçš„æŒºç†Ÿå•Šã€‚

**æˆ‘ï¼š**Â ä¹Ÿæ²¡æœ‰è¾£ï¼Œæˆ‘åªæ˜¯å¹³å¸¸çƒ­çˆ±å­¦ä¹ çŸ¥è¯†ï¼Œç»å¸¸åšä¸€äº›æ€»ç»“æ±‡æ€»ï¼Œæ‰€ä»¥å°±è„±å£è€Œå‡ºäº†ã€‚

**é¢è¯•å®˜ï¼š**Â åˆ«å¼€æŸ“åŠäº†ï¼Œæˆ‘å†é—®ä½ ï¼Œ**MySQLè”åˆç´¢å¼•**ä¸€å®šéµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™å—ï¼Ÿ

> æˆ‘æ“¦ï¼Œè¿™æŠŠæˆ‘é—®çš„ä¸è‡ªä¿¡äº†ã€‚

**æˆ‘ï¼š**Â å—¯ï¼Œ**MySQLè”åˆç´¢å¼•**å¯èƒ½æœ‰æ—¶å€™ä¸éµå¾ªæœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ã€‚

**é¢è¯•å®˜ï¼š**Â ä»€ä¹ˆæ—¶å€™éµå¾ªï¼Ÿä»€ä¹ˆæ—¶å€™ä¸éµå¾ªï¼Ÿ

**æˆ‘ï¼š**Â å¯èƒ½æ˜¯æ™´å¤©éµå¾ªï¼Œä¸‹é›¨äº†å°±ä¸éµå¾ªäº†ï¼Œæ¯ä¸ªæœˆé‚£å‡ å¤©ä¸èˆ’æœçš„æ—¶å€™ä¹Ÿä¸éµå¾ªäº†â€¦â€¦

**é¢è¯•å®˜ï¼š**Â ä»Šå¤©é¢è¯•å°±åˆ°è¿™å§ï¼Œä½ å…ˆå›å»ç­‰é€šçŸ¥ï¼Œæœ‰åç»­æ¶ˆæ¯ä¼šè”ç³»ä½ çš„ã€‚

> æˆ‘æ“¦ï¼Œè¿™å«ä»€ä¹ˆé—®é¢˜å•Šï¼Ÿ
> 
> ä»€ä¹ˆéµå¾ªä¸éµå¾ªï¼Ÿ
> 
> éš¾é“æ˜¯é¢è¯•å®˜è·Ÿæˆ‘èƒŒçš„å…«è‚¡æ–‡ä¸æ˜¯åŒä¸€å¥—ï¼Ÿ

![what.jpeg](media/what.jpeg.webp)

å›å»åˆ°MySQLå®˜ç½‘ä¸Šç¿»äº†ä¸€ä¸‹ï¼Œæ‰å‘ç°é¢è¯•å®˜æƒ³é—®çš„æ˜¯**ç´¢å¼•è·³è·ƒæ‰«æï¼ˆIndex Skip Scanï¼‰**Â ã€‚

MySQL8.0ç‰ˆæœ¬å¼€å§‹å¢åŠ äº†**ç´¢å¼•è·³è·ƒæ‰«æ**çš„åŠŸèƒ½ï¼Œå½“ç¬¬ä¸€åˆ—ç´¢å¼•çš„å”¯ä¸€å€¼è¾ƒå°‘æ—¶ï¼Œå³ä½¿whereæ¡ä»¶æ²¡æœ‰ç¬¬ä¸€åˆ—ç´¢å¼•ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ä¹Ÿå¯ä»¥ç”¨åˆ°è”åˆç´¢å¼•ã€‚

é€ ç‚¹æ•°æ®éªŒè¯ä¸€ä¸‹ï¼Œå…ˆåˆ›å»ºä¸€å¼ ç”¨æˆ·è¡¨ï¼š

```go
CREATE TABLE `user` (
 Â `id` int NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®',
 Â `name` varchar(255) NOT NULL COMMENT 'å§“å',
 Â `gender` tinyint NOT NULL COMMENT 'æ€§åˆ«',
 Â PRIMARY KEY (`id`),
 Â KEY `idx_gender_name` (`gender`,`name`)
) ENGINE=InnoDB COMMENT='ç”¨æˆ·è¡¨';
å¤åˆ¶ä»£ç 
```

åœ¨æ€§åˆ«å’Œå§“åä¸¤ä¸ªå­—æ®µä¸Š(`gender`,`name`)å»ºç«‹è”åˆç´¢å¼•ï¼Œæ€§åˆ«å­—æ®µåªæœ‰ä¸¤ä¸ªæšä¸¾å€¼ã€‚

æ‰§è¡ŒSQLæŸ¥è¯¢éªŒè¯ä¸€ä¸‹ï¼š

```sql
explain select * from user where name='ä¸€ç¯';
å¤åˆ¶ä»£ç 
```

![image-20220803213714714.png](media/image-20220803213714714.png.webp)

è™½ç„¶SQLæŸ¥è¯¢æ¡ä»¶åªæœ‰nameå­—æ®µï¼Œä½†æ˜¯ä»æ‰§è¡Œè®¡åˆ’ä¸­çœ‹åˆ°ä¾ç„¶æ˜¯ç”¨äº†è”åˆç´¢å¼•ã€‚

å¹¶ä¸”Extraåˆ—ä¸­æ˜¾ç¤ºå¢åŠ äº†**Using index for skip scan**ï¼Œè¡¨ç¤ºç”¨åˆ°äº†**ç´¢å¼•è·³è·ƒæ‰«æ**çš„ä¼˜åŒ–é€»è¾‘ã€‚

å…·ä½“ä¼˜åŒ–æ–¹å¼ï¼Œå°±æ˜¯åŒ¹é…çš„æ—¶å€™é‡åˆ°ç¬¬ä¸€åˆ—ç´¢å¼•å°±è·³è¿‡ï¼Œç›´æ¥åŒ¹é…ç¬¬äºŒåˆ—ç´¢å¼•çš„å€¼ï¼Œè¿™æ ·å°±å¯ä»¥ç”¨åˆ°è”åˆç´¢å¼•äº†ã€‚

å…¶å®æˆ‘ä»¬ä¼˜åŒ–ä¸€ä¸‹SQLï¼ŒæŠŠç¬¬ä¸€åˆ—çš„æ‰€æœ‰æšä¸¾å€¼åŠ åˆ°whereæ¡ä»¶ä¸­ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ°è”åˆç´¢å¼•ï¼š

```csharp
select * from user where gender in (0,1) and name='ä¸€ç¯';
å¤åˆ¶ä»£ç 
```

çœ‹æ¥è¿˜æ˜¯éœ€è¦ç»å¸¸æ›´æ–°è‡ªå·±çš„çŸ¥è¯†ä½“ç³»ï¼Œä¸€ä¸ç•™ç¥å°±outäº†ï¼

![å­¦æ— æ­¢å¢ƒ.jpeg](media/å­¦æ— æ­¢å¢ƒ.jpeg.webp)

**ä½ è§‰å¾—å‘¢ï¼Ÿ**

![image.png](media/image.png.webp)

åˆ†ç±»ï¼š

[åç«¯](https://juejin.cn/backend)

æ ‡ç­¾ï¼š

[åç«¯](https://juejin.cn/tag/%E5%90%8E%E7%AB%AF)[æ•°æ®åº“](https://juejin.cn/tag/%E6%95%B0%E6%8D%AE%E5%BA%93)[MySQL](https://juejin.cn/tag/MySQL)

çƒ­é—¨è¯„è®º

[![å®‰ä½™ç”Ÿå¤§å¤§çš„å¤´åƒ](media/å®‰ä½™ç”Ÿå¤§å¤§çš„å¤´åƒ.webp)](https://juejin.cn/user/1478198678540072)

[å®‰ä½™ç”Ÿå¤§å¤§![lv-4](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/img/lv-4.a78c420.png "åˆ›ä½œç­‰çº§")![æ˜å‹ç­‰çº§](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/70f1e5e3a2fde62e0d623009ab80cb12.svg "æ˜å‹ç­‰çº§")

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/1478198678540072)

3æœˆå‰

ä¸ç”¨8.0ï¼Œä½ whereæ¡ä»¶ç”¨ä¸­é—´çš„ç´¢å¼•ï¼Œå­—æ®µé‡Œä¸å†™é™¤äº†è”åˆç´¢å¼•çš„å…¶ä»–å­—æ®µä¸€æ ·èµ°ç´¢å¼•ï¼Œä½ å¯ä»¥çœ‹çœ‹æ‰§è¡Œè®¡åˆ’

3

19

[![](media/36a3a9c70e92df23b1a2087b47d9aaac~100x100.awebp.webp)](https://juejin.cn/user/360295542819710)

[ä¸€ç¯æ¶æ„

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/360295542819710)

ï¼ˆä½œè€…ï¼‰3æœˆå‰

ä»€ä¹ˆæƒ…å†µï¼Œéš¾é“å®˜ç½‘ä¸Šå†™é”™äº†ï¼Ÿ

![image](media/image-1.webp)

ç‚¹èµ

å›å¤

[![](media/7b4cb2592cc1bf6acf762ec1f51418c7~100x100.awebp.webp)](https://juejin.cn/user/1478198678540072)

[å®‰ä½™ç”Ÿå¤§å¤§

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/1478198678540072)

å›å¤

[ä¸€ç¯æ¶æ„](https://juejin.cn/user/360295542819710)

3æœˆå‰

æˆ‘è¯´çš„ä¸æ˜¯è¿™ä¸ªæ–°ç‰¹æ€§ï¼Œæ˜¯ç´¢å¼•æ–¹æ³•çš„ä¸€ç§

![image](media/image.webp)

â€œ

ä»€ä¹ˆæƒ…å†µï¼Œéš¾é“å®˜ç½‘ä¸Šå†™é”™äº†ï¼Ÿ

â€

ç‚¹èµ

å›å¤

[![](media/7b4cb2592cc1bf6acf762ec1f51418c7~100x100.awebp.webp)](https://juejin.cn/user/1478198678540072)

[å®‰ä½™ç”Ÿå¤§å¤§

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/1478198678540072)

å›å¤

[ä¸€ç¯æ¶æ„](https://juejin.cn/user/360295542819710)

3æœˆå‰

å¯ä»¥çœ‹è”åˆç´¢å¼•ä¸èµ°æœ€å·¦åŒ¹é…ä¹Ÿå¯ä»¥æ‰§è¡Œç´¢å¼•

![image](media/image-1.webp)

â€œ

ä»€ä¹ˆæƒ…å†µï¼Œéš¾é“å®˜ç½‘ä¸Šå†™é”™äº†ï¼Ÿ

â€

ç‚¹èµ

å›å¤

[![](media/e972a4b6cd94c5330a5465b47df7f3bd~100x100.awebp.webp)](https://juejin.cn/user/3456520290049646)

[ã€‚ä¸æƒ³è¯´è¯70831](https://juejin.cn/user/3456520290049646)

å›å¤

[å®‰ä½™ç”Ÿå¤§å¤§](https://juejin.cn/user/1478198678540072)

3æœˆå‰

èƒ½ç»™ä¸‹å»ºè¡¨è¯­å¥å˜›

â€œ

å¯ä»¥çœ‹è”åˆç´¢å¼•ä¸èµ°æœ€å·¦åŒ¹é…ä¹Ÿå¯ä»¥æ‰§è¡Œç´¢å¼•

â€

ç‚¹èµ

å›å¤

[![](media/7b4cb2592cc1bf6acf762ec1f51418c7~100x100.awebp.webp)](https://juejin.cn/user/1478198678540072)

[å®‰ä½™ç”Ÿå¤§å¤§

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/1478198678540072)

å›å¤

[ã€‚ä¸æƒ³è¯´è¯70831](https://juejin.cn/user/3456520290049646)

3æœˆå‰

CREATE TABLE `single_table` (  
`id` int(11) NOT NULL AUTO_INCREMENT,  
`key1` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,  
`key2` int(11) NULL DEFAULT NULL,  
`key3` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,  
`key_part1` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,  
`key_part2` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,  
`key_part3` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,  
`common_field` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,  
PRIMARY KEY (`id`) USING BTREE,  
UNIQUE INDEX `idx_key2`(`key2`) USING BTREE,  
INDEX `idx_key1`(`key1`) USING BTREE,  
INDEX `idx_key3`(`key3`) USING BTREE,  
INDEX `idx_key_part`(`key_part1`, `key_part2`, `key_part3`) USING BTREE  
) ENGINE = InnoDB AUTO_INCREMENT = 6 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

æ”¶èµ·

â€œ

èƒ½ç»™ä¸‹å»ºè¡¨è¯­å¥å˜›

â€

ç‚¹èµ

å›å¤

[![](media/36a3a9c70e92df23b1a2087b47d9aaac~100x100.awebp.webp)](https://juejin.cn/user/360295542819710)

[ä¸€ç¯æ¶æ„

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/360295542819710)

ï¼ˆä½œè€…ï¼‰

å›å¤

[å®‰ä½™ç”Ÿå¤§å¤§](https://juejin.cn/user/1478198678540072)

3æœˆå‰

ä½ åœ¨key_part2å­—æ®µä¸Šå•ç‹¬åˆ›å»ºäº†ç´¢å¼•ï¼ŒæŸ¥è¯¢çš„æ—¶å€™å½“ç„¶ä¼šç”¨åˆ°ç´¢å¼•ï¼Œä½ æŠŠkey_part2çš„ç‹¬ç«‹ç´¢å¼•åˆ é™¤å†æŸ¥è¯¢è¯•è¯•

â€œ

å¯ä»¥çœ‹è”åˆç´¢å¼•ä¸èµ°æœ€å·¦åŒ¹é…ä¹Ÿå¯ä»¥æ‰§è¡Œç´¢å¼•

â€

ç‚¹èµ

å›å¤

[![](media/7b4cb2592cc1bf6acf762ec1f51418c7~100x100.awebp.webp)](https://juejin.cn/user/1478198678540072)

[å®‰ä½™ç”Ÿå¤§å¤§

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/1478198678540072)

å›å¤

[ä¸€ç¯æ¶æ„](https://juejin.cn/user/360295542819710)

3æœˆå‰

ä½ çœ‹æ¸…æ¥šï¼Œå•ç‹¬ç´¢å¼•çš„æ˜¯key1ã€key2ã€key3ï¼Œä¸æ˜¯key_part2

â€œ

ä½ åœ¨key_part2å­—æ®µä¸Šå•ç‹¬åˆ›å»ºäº†ç´¢å¼•ï¼ŒæŸ¥è¯¢çš„æ—¶å€™å½“ç„¶ä¼šç”¨åˆ°ç´¢å¼•ï¼Œä½ æŠŠkey_part2çš„ç‹¬ç«‹ç´¢å¼•åˆ é™¤å†æŸ¥è¯¢è¯•è¯•

â€

ç‚¹èµ

å›å¤

[![](media/57d7949a54723c57cac25d8dd16ccf82~100x100.awebp.webp)](https://juejin.cn/user/2797634351280462)

[å›½å›½å„¿æœ‰æ‰èƒ½](https://juejin.cn/user/2797634351280462)

3æœˆå‰

è¿™åº”è¯¥ç®—ç´¢å¼•è¦†ç›–å§ï¼Ÿ

5

å›å¤

[![](media/5070639578~100x100.awebp.webp)](https://juejin.cn/user/888061127295943)

[è¶…æ–°æ˜Ÿ](https://juejin.cn/user/888061127295943)

å›å¤

[å®‰ä½™ç”Ÿå¤§å¤§](https://juejin.cn/user/1478198678540072)

3æœˆå‰

è€å“¥ï¼Œä½ æŠŠ  
explain select key_part1,key_part2,key_part3 from single_table where key_part2 = '2'  
æ¢æˆ  
explain select * from single_table where key_part2 = '2'  
çœ‹çœ‹ï¼Œå°±æ²¡æœ‰ç´¢å¼•äº†ã€‚  
ä½ è¿™ä¸ªæ˜¯è§¦å‘äº†ç´¢å¼•è¦†ç›–ã€‚

å±•å¼€

![image](media/image-1.webp)

â€œ

ä½ çœ‹æ¸…æ¥šï¼Œå•ç‹¬ç´¢å¼•çš„æ˜¯key1ã€key2ã€key3ï¼Œä¸æ˜¯key_part2

â€

4

å›å¤

[![](media/7b4cb2592cc1bf6acf762ec1f51418c7~100x100.awebp.webp)](https://juejin.cn/user/1478198678540072)

[å®‰ä½™ç”Ÿå¤§å¤§

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/1478198678540072)

å›å¤

[è¶…æ–°æ˜Ÿ](https://juejin.cn/user/888061127295943)

3æœˆå‰

æˆ‘çŸ¥é“å•Šï¼Œæ–‡ç« è¯´çš„æ˜¯è”åˆç´¢å¼•çš„éæœ€å·¦åŒ¹é…ï¼Œè¿™ç§æƒ…å†µä¸‹éæœ€å·¦åŒ¹é…çš„è”åˆç´¢å¼•ä¹Ÿèƒ½èµ°ç´¢å¼•çš„

â€œ

è€å“¥ï¼Œä½ æŠŠ  
explain select key_part1,key_part2,key_part3 from single_table where key_part2 = '2'  
æ¢æˆ  
explain select * from single_table where key_part2 = '2'  
çœ‹çœ‹ï¼Œå°±æ²¡æœ‰ç´¢å¼•äº†ã€‚  
ä½ è¿™ä¸ªæ˜¯è§¦å‘äº†ç´¢å¼•è¦†ç›–ã€‚

â€

1

å›å¤

[![](media/912b24c60caec74763366c2ec320991a~100x100.awebp.webp)](https://juejin.cn/user/2973533054179422)

[è·³åŠ¨çš„bug](https://juejin.cn/user/2973533054179422)

å›å¤

[å®‰ä½™ç”Ÿå¤§å¤§](https://juejin.cn/user/1478198678540072)

3æœˆå‰

å°±æ˜¯ä½ çš„æŸ¥è¯¢å­—æ®µå’Œwhereæ¡ä»¶å­—æ®µï¼Œéƒ½æ˜¯è”åˆç´¢å¼•çš„å­—æ®µçš„æ—¶å€™ï¼Œå°±ä¼šç›´æ¥èµ°è”åˆç´¢å¼•ï¼Œè™½ç„¶æ ¹æ®explainåˆ†æç»“æœæ˜¾ç¤ºèµ°äº†ç´¢å¼•ï¼Œå…¶å®åº”è¯¥ä¹Ÿæ˜¯éå†äº†æ•´ä¸ªè”åˆç´¢å¼•æŸ¥æ‰¾

â€œ

æˆ‘çŸ¥é“å•Šï¼Œæ–‡ç« è¯´çš„æ˜¯è”åˆç´¢å¼•çš„éæœ€å·¦åŒ¹é…ï¼Œè¿™ç§æƒ…å†µä¸‹éæœ€å·¦åŒ¹é…çš„è”åˆç´¢å¼•ä¹Ÿèƒ½èµ°ç´¢å¼•çš„

â€

4

å›å¤

[![](media/7c40eeada06516c0a11e82576bf45ee5~100x100.awebp.webp)](https://juejin.cn/user/668963849647127)

[ç²¾ç¥1å°ä¼™å„¿](https://juejin.cn/user/668963849647127)

å›å¤

[å®‰ä½™ç”Ÿå¤§å¤§](https://juejin.cn/user/1478198678540072)

3æœˆå‰

è¿™ç§æƒ…å†µæ˜¯ä½ åˆ›å»ºçš„è”åˆç´¢å¼•é‚£é¢—æ ‘å®Œå…¨èƒ½æ»¡è¶³ä½ çš„æŸ¥è¯¢ç»“æœï¼Œå°±ä¸ç”¨å»æ‰«æèšç°‡ç´¢å¼•é‚£é¢—æ ‘ï¼Œæ‰€ä»¥æ‰ç”¨åˆ°äº†è”åˆç´¢å¼•ã€‚

â€œ

æˆ‘çŸ¥é“å•Šï¼Œæ–‡ç« è¯´çš„æ˜¯è”åˆç´¢å¼•çš„éæœ€å·¦åŒ¹é…ï¼Œè¿™ç§æƒ…å†µä¸‹éæœ€å·¦åŒ¹é…çš„è”åˆç´¢å¼•ä¹Ÿèƒ½èµ°ç´¢å¼•çš„

â€

ç‚¹èµ

å›å¤

[![](media/2889309425~100x100.awebp.webp)](https://juejin.cn/user/1852058085369784)

[HEAVEN](https://juejin.cn/user/1852058085369784)

å›å¤

[å›½å›½å„¿æœ‰æ‰èƒ½](https://juejin.cn/user/2797634351280462)

3æœˆå‰

ä¸æ˜¯è¦†ç›–ç´¢å¼•ï¼Œç´¢å¼•ç‰©ç†æ–‡ä»¶å…¨æ‰«æ

â€œ

è¿™åº”è¯¥ç®—ç´¢å¼•è¦†ç›–å§ï¼Ÿ

â€

1

å›å¤

[![](media/2889309425~100x100.awebp.webp)](https://juejin.cn/user/1852058085369784)

[HEAVEN](https://juejin.cn/user/1852058085369784)

å›å¤

[è·³åŠ¨çš„bug](https://juejin.cn/user/2973533054179422)

3æœˆå‰

å¯¹çš„  
é˜¿é‡Œjavaå¼€å‘æ‰‹å†Œ  
8. ã€æ¨èã€‘SQL æ€§èƒ½ä¼˜åŒ–çš„ç›®æ ‡ï¼šè‡³å°‘è¦è¾¾åˆ° range çº§åˆ«ï¼Œè¦æ±‚æ˜¯ ref çº§åˆ«ï¼Œå¦‚æœå¯ä»¥æ˜¯ consts  
æœ€å¥½ã€‚  
è¯´æ˜ï¼š  
1ï¼‰ consts å•è¡¨ä¸­æœ€å¤šåªæœ‰ä¸€ä¸ªåŒ¹é…è¡Œï¼ˆä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•ï¼‰ï¼Œåœ¨ä¼˜åŒ–é˜¶æ®µå³å¯è¯»å–åˆ°æ•°æ®ã€‚  
2ï¼‰ ref æŒ‡çš„æ˜¯ä½¿ç”¨æ™®é€šçš„ç´¢å¼•ï¼ˆnormal indexï¼‰ã€‚  
3ï¼‰ range å¯¹ç´¢å¼•è¿›è¡ŒèŒƒå›´æ£€ç´¢ã€‚  
åä¾‹ï¼šexplain è¡¨çš„ç»“æœï¼Œtype=indexï¼Œç´¢å¼•ç‰©ç†æ–‡ä»¶å…¨æ‰«æï¼Œé€Ÿåº¦éå¸¸æ…¢ï¼Œè¿™ä¸ª index çº§åˆ«æ¯”è¾ƒ range  
è¿˜ä½ï¼Œä¸å…¨è¡¨æ‰«ææ˜¯å°å·«è§å¤§å·«

å±•å¼€

â€œ

å°±æ˜¯ä½ çš„æŸ¥è¯¢å­—æ®µå’Œwhereæ¡ä»¶å­—æ®µï¼Œéƒ½æ˜¯è”åˆç´¢å¼•çš„å­—æ®µçš„æ—¶å€™ï¼Œå°±ä¼šç›´æ¥èµ°è”åˆç´¢å¼•ï¼Œè™½ç„¶æ ¹æ®explainåˆ†æç»“æœæ˜¾ç¤ºèµ°äº†ç´¢å¼•ï¼Œå…¶å®åº”è¯¥ä¹Ÿæ˜¯éå†äº†æ•´ä¸ªè”åˆç´¢å¼•æŸ¥æ‰¾

â€

2

å›å¤

[![](media/5112637127~100x100.awebp.webp)](https://juejin.cn/user/2154698519612072)

[18356029287](https://juejin.cn/user/2154698519612072)

2æœˆå‰

type=indexï¼Œè¿™ç§ä¸æ˜¯èµ°ç´¢å¼•ï¼Œæ˜¯æ‰«æäº†ç´¢å¼•æ ‘ï¼Œæ•ˆç‡ä¹Ÿå°±æ¯”å…¨è¡¨æ‰«æå¥½ä¸€ç‚¹

1

å›å¤

[![](media/ed9e0e3bdf5a4f595d3f83b693db5c19~100x100.awebp.webp)](https://juejin.cn/user/1767670429266797)

[å–å¥¶èŒ¶ä¸åŠ ç³–](https://juejin.cn/user/1767670429266797)

1æœˆå‰

è¿™ä¸ªå…¶å®å°±æ˜¯mysqlä¼˜å…ˆå»æŸ¥å°è¡¨çš„é€»è¾‘

ç‚¹èµ

å›å¤

[![](media/807c54f2b6bfefbd63cb739221905b69~100x100.awebp.webp)](https://juejin.cn/user/1764089335658798)

[å–‚ä½ è¢‹ç›å•Š](https://juejin.cn/user/1764089335658798)

å›å¤

[å®‰ä½™ç”Ÿå¤§å¤§](https://juejin.cn/user/1478198678540072)

1æœˆå‰

![[å‘å‘†]](media/[å‘å‘†].png)æˆ‘ä¹Ÿçœ‹é”™äº†

â€œ

ä½ çœ‹æ¸…æ¥šï¼Œå•ç‹¬ç´¢å¼•çš„æ˜¯key1ã€key2ã€key3ï¼Œä¸æ˜¯key_part2

â€

ç‚¹èµ

å›å¤

[![](media/d01656b2d4766263cdc30798791827c6~100x100.awebp.webp)](https://juejin.cn/user/4371313964094125)

[EasyCodeğŸ€](https://juejin.cn/user/4371313964094125)

å›å¤

[å–‚ä½ è¢‹ç›å•Š](https://juejin.cn/user/1764089335658798)

3å¤©å‰

type = index æ˜¯å…¨ç´¢å¼•æ‰«æï¼Œæ‰«ææ•´é¢—ç´¢å¼•æ ‘ï¼Œå¦‚æœæŸ¥è¯¢æ•°æ®é‡å¤§çš„æŸäº›æƒ…å†µä¸‹ï¼Œå…¨ç´¢å¼•æ‰«ææ¯”å…¨è¡¨æ‰«ææ€§èƒ½è¿˜ä½ã€‚

â€œ

![[å‘å‘†]](media/[å‘å‘†].png)æˆ‘ä¹Ÿçœ‹é”™äº†

â€

ç‚¹èµ

å›å¤

[![](media/d01656b2d4766263cdc30798791827c6~100x100.awebp.webp)](https://juejin.cn/user/4371313964094125)

[EasyCodeğŸ€](https://juejin.cn/user/4371313964094125)

3å¤©å‰

type = index æ˜¯å…¨ç´¢å¼•æ‰«æï¼Œæ‰«ææ•´é¢—ç´¢å¼•æ ‘ï¼Œå¦‚æœæŸ¥è¯¢æ•°æ®é‡å¤§çš„æŸäº›æƒ…å†µä¸‹ï¼Œå…¨ç´¢å¼•æ‰«ææ¯”å…¨è¡¨æ‰«ææ€§èƒ½è¿˜ä½ã€‚

ç‚¹èµ

å›å¤

[![å…³å±±é£æ¸¡çš„å¤´åƒ](media/å…³å±±é£æ¸¡çš„å¤´åƒ.webp)](https://juejin.cn/user/219558057090152)

[å…³å±±é£æ¸¡![æ˜å‹ç­‰çº§](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/69eb0ad2f93abf938e832fe53b979c10.svg "æ˜å‹ç­‰çº§")](https://juejin.cn/user/219558057090152)

3æœˆå‰

é‡åˆ° Index Skip Scan å¾—æ—¶å€™, è¯´æ˜ç´¢å¼•å­—æ®µé€‰æ‹©æœ‰é—®é¢˜, åº”è¯¥åˆ›å»ºä¸€ä¸ªæ–°å¾—åˆé€‚ç´¢å¼•.

7

3

[![](media/36a3a9c70e92df23b1a2087b47d9aaac~100x100.awebp.webp)](https://juejin.cn/user/360295542819710)

[ä¸€ç¯æ¶æ„

![](https://lf3-cdn-tos.bytescm.com/obj/static/xitu_juejin_web/07302452a7ad81cb43a173b5cd580237.svg)

](https://juejin.cn/user/360295542819710)

ï¼ˆä½œè€…ï¼‰3æœˆå‰

æ˜¯çš„

1

å›å¤

[![](media/5035712059~100x100.awebp.webp)](https://juejin.cn/user/1042817163468360)

[ç”¨æˆ·6291960854961](https://juejin.cn/user/1042817163468360)

å›å¤

[ä¸€ç¯æ¶æ„](https://juejin.cn/user/360295542819710)

2æœˆå‰

å¯¹

â€œ

æ˜¯çš„

â€

ç‚¹èµ

å›å¤

[![](media/6904066945bae0984a09eadf971586c6~100x100.awebp.webp)](https://juejin.cn/user/3461689212935710)

[æ±Ÿå»º](https://juejin.cn/user/3461689212935710)

1æœˆå‰

æ„Ÿè§‰è¿™ä¸ªåˆ†äº«è¶Šæ¥è¶Šæ°´äº†